---
import Cmd from "~/components/Cmd.astro";
import IntroCard, { type Props as CardProps } from "~/components/IntroCard.astro";

import IconDocument from "~/components/icons/IconDocument.astro";
import IconEmail from "~/components/icons/IconEmail.astro";
import IconGitHub from "~/components/icons/IconGitHub.astro";
import IconLinkedIn from "~/components/icons/IconLinkedIn.astro";

import BaseLayout from "~/layouts/BaseLayout.astro";

import { Image } from "astro:assets";
import { getCollection } from "astro:content";
import FormattedDate from "~/components/FormattedDate.astro";
import IconTools from "~/components/icons/IconTools.astro";

const featuredProjectCard: CardProps = {
  title: "chessu",
  description:
    "Online multiplayer chess web app with spectator support and optional user authentication.",
};

const latestPost = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
)[0];
---

<BaseLayout>
  <div class="flex w-full flex-col gap-44 pt-8">
    <div class="mt-4 flex w-full flex-col items-center gap-4">
      <div
        class="flex w-full flex-col items-center justify-center gap-4 text-gruvbox-fg dark:text-gruvboxDark-fg sm:flex-row"
      >
        <Image
          src="/images/nize.png"
          alt="nize's avatar"
          width={96}
          height={96}
          class="nb-shadow rounded-sm border border-gruvbox-fg bg-gruvbox-bg transition-shape duration-200 dark:rounded-[48px] dark:border-none dark:shadow-none dark:hover:-translate-y-1"
        />
        <div class="flex flex-col flex-wrap">
          <h1 class="text-center font-outfit text-3xl">Nathaniel Tampus</h1>
          <span class="text-center font-azeret text-lg sm:text-start">// nize</span>
        </div>
      </div>
      <p class="my-4 text-center font-sans sm:my-1">
        I'm Nathaniel, a developer from the Philippines. I like TypeScript and Go.
      </p>
      <div class="flex w-full max-w-prose flex-col items-center justify-evenly gap-3 sm:flex-row">
        <a
          href="mailto:hi@nize.foo"
          title="hi@nize.foo"
          class="flex items-center gap-1 hover:underline"
        >
          <IconEmail class="h-5 w-5 text-gruvbox-yellow" /> Email
        </a>
        <a
          href="https://github.com/dotnize"
          title="dotnize"
          target="_blank"
          rel="noopener noreferrer"
          class="flex items-center gap-1 hover:underline"
        >
          <IconGitHub class="h-5 w-5 text-gruvbox-fg0 dark:text-gruvboxDark-fg0" /> GitHub
        </a>
        <a
          href="https://linkedin.com/in/nize"
          title="nize"
          target="_blank"
          rel="noopener noreferrer"
          class="flex items-center gap-1 hover:underline"
        >
          <IconLinkedIn class="h-5 w-5 text-gruvbox-blue" /> LinkedIn
        </a>
      </div>
    </div>
    <div class="flex flex-col gap-4">
      <Cmd text="stuff --featured" />

      <div class="flex w-full flex-wrap justify-center gap-3">
        <IntroCard {...featuredProjectCard}>
          <div slot="subtitle">
            <div class="inline-flex items-center">
              <IconTools class="h-3 w-3" />
            </div>
            {" Next.js, Tailwind CSS, Express.js, socket.io"}
          </div>

          <a
            slot="link"
            href="https://github.com/dotnize/chessu"
            class="flex items-center gap-1 hover:underline"
            target="_blank"
            rel="noopener noreferrer"
            title="GitHub repository"
          >
            <IconGitHub class="h-4 w-4" />
            GitHub
          </a>
        </IntroCard>
        <IntroCard title={latestPost.data.title} description={latestPost.data.description}>
          <div slot="subtitle">
            <div class="inline-flex items-center">
              <IconDocument class="h-3 w-3" />
            </div>
            {" "}Latest post - <FormattedDate date={latestPost.data.pubDate} />
          </div>
          <a
            slot="link"
            href={`/blog/${latestPost.slug.split("/").pop()}/`}
            title="Read blog post"
            class="flex items-center justify-end text-sm font-bold text-gruvbox-fg3 transition-all hover:text-gruvbox-blue dark:text-gruvboxDark-fg4 dark:hover:text-gruvboxDark-blue"
          >
            Read post
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              class="h-5 w-5"
            >
              <path
                fill-rule="evenodd"
                d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"
                clip-rule="evenodd"></path>
            </svg>
          </a>
        </IntroCard>
      </div>
    </div>

    <div class="flex flex-col gap-5">
      <Cmd text="getintouch" />
      <div class="flex flex-col items-center gap-3">
        <span>
          <span
            class="inline-flex h-3 w-3 rounded-full border border-gruvbox-fg0 bg-gruvbox-aqua2 dark:border-none"
          ></span>
          I'm open to new opportunities and projects to collaborate on.
        </span>
        <a
          href="/contact/"
          class="nb-shadow flex items-center gap-1 rounded border border-gruvbox-fg bg-gruvbox-aqua2 p-2 font-bold text-gruvbox-bgH transition-all dark:rounded-md dark:border-none dark:shadow-md dark:hover:bg-gruvbox-aqua"
        >
          <IconEmail class="h-5 w-5" />
          Contact me!</a
        >
      </div>
    </div>

    <div class="my-4 flex w-full flex-col items-center gap-2">
      <p>
        Member of the <a
          class="font-medium text-gruvbox-fg0 hover:underline dark:text-gruvboxDark-fg0"
          href="https://webring.antaresph.dev">Pinoy Websites</a
        > webring
      </p>
      <div class="flex flex-col items-center gap-2 font-bold sm:flex-row sm:gap-4">
        <a
          class="underline transition-all hover:text-gruvbox-fg0 dark:hover:text-gruvboxDark-fg0"
          href="https://webring.antaresph.dev/previous">Previous</a
        >
        <a
          class="transition-all hover:text-gruvbox-fg0 hover:underline dark:hover:text-gruvboxDark-fg0"
          href="https://webring.antaresph.dev/random">Random</a
        >
        <a
          class="underline transition-all hover:text-gruvbox-fg0 dark:hover:text-gruvboxDark-fg0"
          href="https://webring.antaresph.dev/next">Next</a
        >
      </div>
    </div>
  </div>
</BaseLayout>
